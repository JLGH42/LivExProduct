<!DOCTYPE html>
<html>

<head>
    <title>Chart HTML</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/chartist.js/latest/chartist.min.css">
    <script src="https://cdn.jsdelivr.net/chartist.js/latest/chartist.min.js"></script>
</head>

<body>
    <!-- Table button -->
    <div class="tableContainer">
        <input type="button" onclick="CreateTableFromJSON()" value="Create Table from json" />
        <p id="showData"></p>
        <style>
            th,
            td,
            p,
            input {
                font: 14px Verdana;
            }
            
            table,
            th,
            td {
                border: solid 1px #DDD;
                border-collapse: collapse;
                padding: 2px 3px;
                text-align: center;
            }
            
            th {
                font-weight: bold;
            }
        </style>
    </div>

    <div class="chartContainer">
        <input type="button" onclick="createChart()" value="Create Chart from Json" />
        <p id="createData"></p>
    </div>
    <div class="ct-chart ct-square"></div>

    <script>
        function createChart() {
            var wineData = [{
                "Title": "1990 La Tâche, Domaine De La Romanée-Conti",
                "Price": "99.99",
                "Vintage": "2000",
                "Type": "Red",
                "Abv": "12%",
                "Country": "United Kingdom",
                "Region": "",
                "Appellation": "Surrey",
                "CurrentDate": "21/08/18",
                "HistoricalData": {
                    "Date": ["12/07/16", "11/07/16", "22/03/17"],
                    "histPrice": ["75.99", "50.50", "60.00"]
                },
                "HarvestSeason": "Spring"
            }, {
                "Title": "Second Wine",
                "Price": "30.50",
                "Vintage": "2050",
                "Type": "Sparkling",
                "Abv": "22%",
                "Country": "Portugal",
                "Region": "Du Ruera",
                "Appellation": "DO Duera",
                "CurrentDate": "22/11/18",
                "HistoricalData": {
                    "Date": ["09/07/12", '13/08/14', "29/09/17"],
                    "histPrice": ["35.99", "70.90", "50.50"]
                },
                "HarvestSeason": "winter"
            }]
            var histPrice = [];
            var histDate = [];
            for (var i = 0; i < wineData.length; i++) {
                for (var key in wineData[i]) {
                    // HistoricalDate Values
                    if (key == 'HistoricalData' && (wineData[i].HistoricalData['histPrice'] != undefined && wineData[i]
                            .HistoricalData['Date'] != undefined)) {
                        histPrice.push(wineData[i].HistoricalData['histPrice'])
                        histDate.push(wineData[i].HistoricalData['Date'])
                    }
                }
            };
            var chart = new Chartist.Line('.ct-square', {
                labels: [
                    histDate
                ],
                series: [
                    [histPrice]
                ]

            }, {
                // Remove this configuration to see that chart rendered with cardinal spline interpolation
                // Sometimes, on large jumps in data values, it's better to use simple smoothing.
                lineSmooth: Chartist.Interpolation.simple({
                    divisor: 2
                }),
                fullWidth: true,
                chartPadding: {
                    right: 20
                },
                low: 0
            });
        }
    </script>
    <script>
        function CreateTableFromJSON() {
            var wineData = [{
                "Title": "1990 La Tâche, Domaine De La Romanée-Conti",
                "Price": "99.99",
                "Vintage": "2000",
                "Type": "Red",
                "Abv": "12%",
                "Country": "United Kingdom",
                "Region": "",
                "Appellation": "Surrey",
                "CurrentDate": "21/08/18",
                "HistoricalDate": {
                    "Date": "12/07/16",
                    "Price": "75.99"
                },
                "HarvestSeason": "Spring"
            }, {
                "Title": "Second Wine",
                "Price": "1000",
                "Vintage": "2050",
                "Type": "Sparkling",
                "Abv": "22%",
                "Country": "Portugal",
                "Region": "Du Ruera",
                "Appellation": "DO Duera",
                "CurrentDate": "22/11/18",
                "HistoricalDate": "09/07/18",
                "HarvestSeason": "Spring"
            }]

            // EXTRACT VALUE FOR HTML HEADER. 
            var col = [];
            for (var i = 0; i < wineData.length; i++) {
                for (var key in wineData[i]) {
                    if (col.indexOf(key) === -1) {
                        col.push(key);
                    }
                }
            }

            // CREATE DYNAMIC TABLE.
            var table = document.createElement("table");

            // CREATE HTML TABLE HEADER ROW USING THE EXTRACTED HEADERS ABOVE.

            var tr = table.insertRow(-1); // TABLE ROW.

            for (var i = 0; i < col.length; i++) {
                var th = document.createElement("th"); // TABLE HEADER.
                th.innerHTML = col[i];
                tr.appendChild(th);
            }

            // ADD JSON DATA TO THE TABLE AS ROWS.
            for (var i = 0; i < wineData.length; i++) {

                tr = table.insertRow(-1);

                for (var j = 0; j < col.length; j++) {
                    var tabCell = tr.insertCell(-1);
                    tabCell.innerHTML = wineData[i][col[j]];
                }
            }

            // FINALLY ADD THE NEWLY CREATED TABLE WITH JSON DATA TO A CONTAINER.
            var divContainer = document.getElementById("showData");
            divContainer.innerHTML = "";
            divContainer.appendChild(table);

            function CreateTableFromJSON() {
                var wineData = [{
                    "Title": "1990 La Tâche, Domaine De La Romanée-Conti",
                    "Price": "99.99",
                    "Vintage": "2000",
                    "Type": "Red",
                    "Abv": "12%",
                    "Country": "United Kingdom",
                    "Region": "",
                    "Appellation": "Surrey",
                    "CurrentDate": "21/08/18",
                    "HistoricalDate": {
                        "Date": "12/07/16",
                        "Price": "75.99"
                    },
                    "HarvestSeason": "Spring"
                }, {
                    "Title": "Second Wine",
                    "Price": "1000",
                    "Vintage": "2050",
                    "Type": "Sparkling",
                    "Abv": "22%",
                    "Country": "Portugal",
                    "Region": "Du Ruera",
                    "Appellation": "DO Duera",
                    "CurrentDate": "22/11/18",
                    "HistoricalDate": "09/07/18",
                    "HarvestSeason": "Spring"
                }]

                // EXTRACT VALUE FOR HTML HEADER. 
                var col = [];
                for (var i = 0; i < wineData.length; i++) {
                    for (var key in wineData[i]) {
                        if (col.indexOf(key) === -1) {
                            col.push(key);
                        }
                    }
                }

                // CREATE DYNAMIC TABLE.
                var table = document.createElement("table");

                // CREATE HTML TABLE HEADER ROW USING THE EXTRACTED HEADERS ABOVE.

                var tr = table.insertRow(-1); // TABLE ROW.

                for (var i = 0; i < col.length; i++) {
                    var th = document.createElement("th"); // TABLE HEADER.
                    th.innerHTML = col[i];
                    tr.appendChild(th);
                }

                // ADD JSON DATA TO THE TABLE AS ROWS.
                for (var i = 0; i < wineData.length; i++) {

                    tr = table.insertRow(-1);

                    for (var j = 0; j < col.length; j++) {
                        var tabCell = tr.insertCell(-1);
                        tabCell.innerHTML = wineData[i][col[j]];
                    }
                }

                // FINALLY ADD THE NEWLY CREATED TABLE WITH JSON DATA TO A CONTAINER.
                var divContainer = document.getElementById("showData");
                divContainer.innerHTML = "";
                divContainer.appendChild(table);
            }
        }
    </script>
</body>

</html>